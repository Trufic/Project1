Обновление прошивки cisco.
1. Версию прошивки можно узнать: show ver / reloade
2. просмотр доступных прошивок: show flash:
3. Заливка прошивки на флеш: copy tftp: flash 192.168.222.95(122.95) <source filename> <как хочешь назвать>
4. Выбираем новую прошивку во флеш: boot system flash:/c2960-lanbasek9-mz.150-2.SE4.bin
5. Wr mem

Обновление конфига cisco.
Для загрузки конфигурации Cisco, потребуется рабочий tftp сервер.
В консоле, взятой со склада cisco вбиваем (copy/paste):

en
conf ter
int vlan 1
ip add 192.168.222.96 255.255.255.0
no shut
exit
ip default-gateway 192.168.222.20
end

Подключаем сетевой кабель в любой порт. Ждем пока порт поднимется, станет зеленым.
Проверяем доступность сети ping 192.168.222.20
Вводим на устройстве, для копирования конфигурации с tftp:
copy tftp: start
192.168.222.95(122.95) /IP адрес машины на которой запущен tftp/
cat.avtovo.lan1_Jan-10-16-18-03.740-8 /Имя файла конфигурации/
[enter] для сохранения по умолчанию
Loading cat.avtovo.lan2 from 192.168.222.95 (via Vlan1): !
[OK - 19744 bytes]
Загрузка завершена. Дальше требуется перезагрузка устройства.
Устройство перезагрузилось, используем локальные учетные данные пользователя для входа.
failsafe xxxxx
Заходим в режим enable (по необходимости):
en
•	Создаем виланы на циске .
Типовые:
conf ter
vlan 25
exit
vlan 30
name ####SECURITY-NET####
exit
vlan 20
name ####VOIP-LAN####
В связи с тем, что оборудование на крупных точках может иметь и другие виланы, лучше всего проверить, какие виланы должны быть прописаны, посмотрев настройки на trunk портах. 
Ищем строчку вида:switchport trunk allowed vlan 20,25,30,33,122
И добавляем в список виланов, все перечисленные в этой строке. Проверить существующие на устройстве виланы можно командой
sh vlan
•	Создаем ssh key
conf ter crypto key generate rsa 1024
•	Сохраняем конфигурацию
wr mem

TFTP (/var/ftproot)
Используется для хранения конфигурации сетевых устройств. На всех сетевых устройствах Cisco (кроме ASA) при сохранении конфигурации в память устройства, 
она автоматически записывается на TFTP сервер.
ASA не умеет делать это автоматически, поэтому для того, чтобы конфигурация попала на сервер, дополнительно к команде write необходимо давать комманду write net.
Запись происходит на основной сервер и автоматически реплицируется на резервный.
TFTP сервер не имеет файла конфигурации и все опции запуска указываются в файле /etc/rc.conf.

_______________________________________________________________________________________________________________________________________________________________________

Обновление конфига Juniper.
Самый быстрый и простой способ заливки конфигурации:
skinder@jun.wi-fi.srx100> configure /Переход в режим конфигурации/
Entering configuration mode
[edit]
skinder@jun.wi-fi.srx100# load override terminal /Загрузить конф. с перезаписью. Загружаем конфигурацию, путем копирования из текстового файла (ctrl+a,ctrl+c,ctrl+v). 
Жмем enter, для перехода на новую строку. Потом нажимаем комбинацию ctrl+D/ [Type ^D at a new line to end input] load complete /Загрузка должна закончиться такой строкой. 
Если есть упоминание об ошибках, значит что-то не так скопировалось./
skinder@jun.wi-fi.srx100# commit check /Проверка на наличие ошибок в конфигурации/
skinder@jun.wi-fi.srx100# commit /Применение настроек/
skinder@jun.wi-fi.srx100# exit
skinder@jun.wi-fi.srx100# request system autorecovery state save

FTP (/var/ftproot)
Оборудование Juniper не поддерживает сохранение конфигурации на TFTP, поэтому используется FTP. 
При сохранении конфигурации в память устройства, она автоматически записывается на FTP сервер. 
Из-за файервола на серверах, используется пассивный режим FTP. Учетная запись (netftp) и пароль (в зашиврованном виде) храняться на самом устройстве.
Для удобства чтения конфигов, доступ по FTP открыт для сотрудников ОСА.
Собственно и TFTP и FTP ссылаются на один и тот же каталог.
Структура каталога:
Archive – старые конфигурации (старше года)
Asa – конфиги ASA (ASA умеет сохранять конфиги только под одним конкретным именем, поэтому с периодичностью в 5 минут такие файлы переименовываются путем добавления 
даты и времени)
Cisco – конфиги всего оборудования Cisco (кроме ASA)
Firmware – хранение прошивок
Juniper - конфиги всего оборудования Juniper (кроме пограничных маршрутизаторов)
Nsg – конфиги NSG-700 (просто храняться, используются для ручного копирования в новые или заменяемые устройства)
Old – конфиги до моего прихода в банк (совсем старые)
Perimeter - конфиги пограничных маршрутизаторов Juniper

Cron
С разной периодичносью запускаются следующие скрипты (все хранятся в /root/scripts):
На основном сервере
Adddate.sh – добавление даты и времени к именам конфигов ASA
Delold.sh – удаление логов NetXMS
Audit.sh – запуск проверки на уязвимости установленных программ.
На резервном сервере
Adddate.sh – добавление даты и времени к именам конфигов ASA (закоментирован – включить при переходе на резерв)
Sync.sh – синхронизация конфигов и другой информации с основного сервера по rsync
Backup-xms.sh – создание резервной копии базы данных NetXMS
Backup-pg – создание резервной копии всех баз postgresql
Audit.sh – запуск проверки на уязвимости установленных программ.